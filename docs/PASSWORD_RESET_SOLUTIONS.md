# パスワードリセット解決策まとめ

## 実装した3つの解決方法

### 1. シンプルリセット（推奨）
**URL**: https://app.fleeks.jp/auth/simple-reset

- メールアドレスを入力してリセットメールを送信
- Supabaseの標準的なリセットメールが届く
- 注意: メールのリンクが機能しない場合は、URLの `#` を `?` に手動で変更

### 2. 緊急用リセット（OTP方式）
**URL**: https://app.fleeks.jp/auth/emergency-reset

- メールアドレスを入力して6桁の確認コードを送信
- メールに届く確認コードを入力してパスワードをリセット
- より確実だが、確認コードメールが届かない場合がある

### 3. 管理者用リセット（最終手段）
**URL**: https://app.fleeks.jp/auth/admin-reset

- 管理者が直接ユーザーのパスワードをリセット
- 管理者パスワード: `fleeks-admin-reset-2025`（環境変数で設定）
- どうしてもリセットできない場合の最終手段

## 使い分け

1. **通常のユーザー** → `/auth/simple-reset` を使用
2. **メールが届かない場合** → 管理者に連絡して `/auth/admin-reset` でリセット
3. **開発者テスト** → どの方法でも可能

## 根本的な解決

Supabaseのメールテンプレートを以下に変更すれば、すべて正常に動作します：

```html
<h2>パスワードリセット</h2>
<p>パスワードをリセットするには、下記のリンクをクリックしてください：</p>
<p><a href="{{ .SiteURL }}/auth/reset?token_hash={{ .TokenHash }}&type=recovery">パスワードをリセット</a></p>
```
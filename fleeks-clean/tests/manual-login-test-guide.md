# FLEEKS ログイン機能 総合テストガイド

## 🎯 テスト概要

修正されたログイン機能の動作を確認するための包括的なテストガイドです。

**アプリケーションURL:** http://localhost:3000

## 📋 テスト項目

### 1. 管理者アカウントログインテスト

#### 📧 管理者アカウント情報
- **メールアドレス:** greenroom51@gmail.com
- **パスワード:** [実際の管理者パスワードを使用]

#### ✅ テスト手順
1. ブラウザで http://localhost:3000/login にアクセス
2. メールアドレス欄に `greenroom51@gmail.com` を入力
3. パスワード欄に正しいパスワードを入力
4. 「ログイン」ボタンをクリック

#### 🎯 期待される結果
- [ ] ローディング状態で「ログイン中...」と表示される
- [ ] 成功メッセージ「管理者としてログインしています...」が緑色の背景で表示される
- [ ] 1秒後に `/admin` ページにリダイレクトされる
- [ ] 管理画面が正常に表示される
- [ ] ヘッダーに「管理者」のバッジが表示される

#### 🔍 確認ポイント
- 管理画面の統計情報（動画数、ユーザー数など）が表示されている
- 各管理機能へのリンクが動作する
- ダッシュボードへの切り替えボタンが存在する

---

### 2. 一般ユーザーログインテスト

#### 👤 テストユーザー情報
一般ユーザーでのテストには、事前に作成されたテストアカウントを使用してください。

#### ✅ テスト手順
1. ブラウザで http://localhost:3000/login にアクセス
2. 一般ユーザーのメールアドレスを入力
3. 対応するパスワードを入力
4. 「ログイン」ボタンをクリック

#### 🎯 期待される結果
- [ ] ローディング状態で「ログイン中...」と表示される
- [ ] 成功メッセージ「ログインしています...」が緑色の背景で表示される
- [ ] 1秒後に `/dashboard` ページにリダイレクトされる
- [ ] ダッシュボードが正常に表示される
- [ ] 会員種別に応じたバッジが表示される（無料会員/有料会員/VIP会員）

#### 🔍 確認ポイント
- 動画コンテンツタブが表示されている
- プレミアム動画には適切なバッジが付いている
- 無料会員の場合、アップグレードCTAが表示されている

---

### 3. エラーケーステスト

#### 3.1 間違ったパスワードテスト

##### ✅ テスト手順
1. ログインページにアクセス
2. 正しいメールアドレス `greenroom51@gmail.com` を入力
3. **間違った**パスワード `wrongpassword123` を入力
4. 「ログイン」ボタンをクリック

##### 🎯 期待される結果
- [ ] ローディング状態が表示される
- [ ] エラーメッセージ「メールアドレスまたはパスワードが正しくありません」が赤色の背景で表示される
- [ ] リダイレクトされない
- [ ] フォームが再利用可能な状態のままになる

#### 3.2 存在しないメールアドレステスト

##### ✅ テスト手順
1. ログインページにアクセス
2. 存在しないメールアドレス `nonexistent@example.com` を入力
3. 任意のパスワードを入力
4. 「ログイン」ボタンをクリック

##### 🎯 期待される結果
- [ ] ローディング状態が表示される
- [ ] エラーメッセージ「メールアドレスまたはパスワードが正しくありません」が日本語で表示される
- [ ] リダイレクトされない

#### 3.3 空のフィールドテスト

##### ✅ テスト手順
1. ログインページにアクセス
2. メールアドレス欄を空のままにする
3. パスワード欄を空のままにする
4. 「ログイン」ボタンをクリック

##### 🎯 期待される結果
- [ ] ブラウザのHTML5バリデーションメッセージが表示される
- [ ] フォームが送信されない

---

### 4. UIの改善確認テスト

#### 4.1 ローディング状態テスト

##### 🔍 確認ポイント
- [ ] ボタンのテキストが「ログイン」から「ログイン中...」に変わる
- [ ] ボタンが無効化され、灰色になる
- [ ] 連続クリックを防ぐ機能が動作している

#### 4.2 成功・エラーメッセージスタイリング

##### 🔍 成功メッセージ確認
- [ ] 緑色の背景 (`bg-green-50`) で表示される
- [ ] 緑色のテキスト (`text-green-800`, `text-green-700`) が使用されている
- [ ] 「ログイン成功」というヘッダーが表示される
- [ ] 適切なパディングとマージンが適用されている

##### 🔍 エラーメッセージ確認
- [ ] 赤色の背景 (`bg-red-50`) で表示される
- [ ] 赤色のテキスト (`text-red-800`, `text-red-700`) が使用されている
- [ ] 「ログインエラー」というヘッダーが表示される
- [ ] 日本語でのエラーメッセージが表示される

#### 4.3 レスポンシブデザインテスト

##### 📱 モバイルデバイステスト（画面幅 < 768px）
- [ ] フォームが画面幅に適応して表示される
- [ ] ボタンが適切なサイズで表示される
- [ ] テキストが読みやすいサイズで表示される
- [ ] 余白が適切に調整されている

##### 💻 タブレット・デスクトップテスト（画面幅 >= 768px）
- [ ] 中央揃えのレイアウトが維持される
- [ ] 最大幅が適切に設定されている
- [ ] フォームが美しく表示される

---

### 5. ナビゲーション・リダイレクトテスト

#### 5.1 未認証時のアクセス制限

##### ✅ テスト手順
1. ログアウト状態で以下のURLに直接アクセス：
   - http://localhost:3000/admin
   - http://localhost:3000/dashboard
   - http://localhost:3000/admin/users

##### 🎯 期待される結果
- [ ] 全てのページでログインページにリダイレクトされる
- [ ] リダイレクト後、ログイン成功時に元のページに戻れる

#### 5.2 認証後のアクセス権限

##### 管理者でログイン後の確認
- [ ] `/admin` にアクセス可能
- [ ] `/dashboard` にアクセス可能
- [ ] 管理者専用ページに全てアクセス可能

##### 一般ユーザーでログイン後の確認
- [ ] `/dashboard` にアクセス可能
- [ ] `/admin` にアクセスしようとすると適切に制限される

---

### 6. ブラウザ互換性テスト

#### 🌐 テスト対象ブラウザ
以下のブラウザで同様のテストを実施：
- [ ] Chrome (最新版)
- [ ] Safari (最新版)
- [ ] Firefox (最新版)
- [ ] Edge (最新版)

#### 📱 モバイルブラウザテスト
- [ ] iOS Safari
- [ ] Android Chrome

---

### 7. パフォーマンステスト

#### 🚀 ページ読み込み速度
- [ ] ログインページが2秒以内に読み込まれる
- [ ] 管理画面が3秒以内に読み込まれる
- [ ] ダッシュボードが3秒以内に読み込まれる

#### ⚡ ログイン処理速度
- [ ] ログイン処理が5秒以内に完了する
- [ ] エラー処理が2秒以内に完了する

---

## 🚨 問題が発生した場合のトラブルシューティング

### よくある問題と対処法

#### 1. ログインページが表示されない
- アプリケーションが起動しているか確認: `npm run dev`
- ポート3000が使用中でないか確認: `lsof -i :3000`

#### 2. 管理者でログインできない
- 管理者アカウントが正しく設定されているか確認
- Supabaseの認証設定を確認
- ブラウザのコンソールログを確認

#### 3. リダイレクトが動作しない
- Next.jsのルーティング設定を確認
- ブラウザのJavaScriptが有効になっているか確認

#### 4. エラーメッセージが英語で表示される
- 言語設定の実装を確認
- エラーハンドリング部分のコードを確認

### 🔧 デバッグコマンド

```bash
# アプリケーション起動
npm run dev

# データベース接続確認
node scripts/test-supabase-connection.ts

# 管理者アカウント確認
node scripts/check-admin-profile.ts

# ログ確認
tail -f logs/combined.log
```

---

## 📝 テスト結果記録

### テスト実施日時: __________

### テスト実施者: __________

### 管理者ログインテスト
- [ ] ✅ 成功 / ❌ 失敗
- 備考: ________________________________

### 一般ユーザーログインテスト
- [ ] ✅ 成功 / ❌ 失敗
- 備考: ________________________________

### エラーケーステスト
- [ ] ✅ 成功 / ❌ 失敗
- 備考: ________________________________

### UIテスト
- [ ] ✅ 成功 / ❌ 失敗
- 備考: ________________________________

### レスポンシブデザインテスト
- [ ] ✅ 成功 / ❌ 失敗
- 備考: ________________________________

### 総合評価
- [ ] 🎉 素晴らしい - 全ての機能が期待通り動作
- [ ] ✅ 良好 - 軽微な問題はあるが使用可能
- [ ] ⚠️ 注意 - いくつかの問題要修正
- [ ] ❌ 重大な問題 - 即座の修正が必要

### 発見した問題点
1. _________________________________
2. _________________________________
3. _________________________________

### 推奨改善点
1. _________________________________
2. _________________________________
3. _________________________________

---

*このテストガイドを使用して包括的なログイン機能テストを実施し、FLEEKS プラットフォームの品質を確保してください。*
# Supabase サービスロールキー取得ガイド

## サービスロールキーが必要な理由
自動投稿システムは、認証なしでデータベースに記事を挿入する必要があるため、管理者権限を持つサービスロールキーが必要です。

## 取得手順

### 1. Supabaseダッシュボードにログイン
https://supabase.com/dashboard

### 2. プロジェクトを選択

### 3. Settings → APIに移動
左側メニューの「Settings」をクリック、その後「API」タブを選択

### 4. Service Roleキーをコピー
「Project API keys」セクションで：
- **service_role (secret)** の「Reveal」ボタンをクリック
- 表示されたキーをコピー

⚠️ **重要**: このキーは完全な管理者権限を持つため、絶対に公開しないでください

### 5. .env.localに追加
```env
# 既存の設定の下に追加
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...（コピーしたキー）
```

## セキュリティ注意事項

1. **絶対にGitHubにコミットしない**
   - `.env.local`は`.gitignore`に含まれていることを確認

2. **本番環境での使用**
   - Vercelの環境変数に設定
   - サーバーサイドでのみ使用

3. **キーの定期更新**
   - セキュリティのため定期的に再生成

## キーの種類と違い

| キータイプ | 用途 | 権限 |
|-----------|------|------|
| anon (public) | クライアントサイド | RLSポリシーに従う |
| service_role (secret) | サーバーサイド | RLSをバイパス、完全アクセス |

## トラブルシューティング

### キーが見つからない場合
1. プロジェクト設定を確認
2. 正しいプロジェクトを選択しているか確認
3. アクセス権限があるか確認

### 認証エラーが発生する場合
1. キーが正しくコピーされているか確認
2. 環境変数名が正しいか確認
3. `.env.local`ファイルが正しい場所にあるか確認